<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>è·¨å¢ƒç‰©æµåˆè§„æŸ¥è¯¢ç³»ç»Ÿ 2025 | Global Shipping Guide</title>
    <script src="https://cdn.tailwindcss.com"></script>
    <style>
        /* è‡ªå®šä¹‰ä¸€äº›å¾®è°ƒæ ·å¼ */
        body { font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, "Helvetica Neue", Arial, sans-serif; background-color: #f3f4f6; }
        .card { background: white; border-radius: 12px; box-shadow: 0 4px 6px -1px rgba(0, 0, 0, 0.1); transition: all 0.2s; }
        .card:hover { box-shadow: 0 10px 15px -3px rgba(0, 0, 0, 0.1); }
        .label { font-size: 0.875rem; color: #64748b; font-weight: 500; margin-bottom: 0.5rem; display: block; }
        .select-input { width: 100%; padding: 0.75rem; border: 1px solid #e2e8f0; border-radius: 8px; background-color: #fff; color: #1e293b; font-weight: 500; outline: none; appearance: none; background-image: url("data:image/svg+xml,%3csvg xmlns='http://www.w3.org/2000/svg' fill='none' viewBox='0 0 20 20'%3e%3cpath stroke='%236b7280' stroke-linecap='round' stroke-linejoin='round' stroke-width='1.5' d='M6 8l4 4 4-4'/%3e%3c/svg%3e"); background-position: right 0.5rem center; background-repeat: no-repeat; background-size: 1.5em 1.5em; }
        .select-input:focus { border-color: #3b82f6; ring: 2px solid #3b82f6; }
    </style>
</head>
<body class="text-slate-800">

    <header class="bg-blue-900 text-white shadow-lg sticky top-0 z-50">
        <div class="max-w-4xl mx-auto px-4 py-4 flex justify-between items-center">
            <div>
                <h1 class="text-xl font-bold tracking-tight">Global Logistics Data</h1>
                <p class="text-blue-200 text-xs mt-0.5">è·¨å¢ƒç‰©æµåˆè§„æŸ¥è¯¢æ•°æ®åº“ (2025 Ver.)</p>
            </div>
            <div class="text-right hidden sm:block">
                <div class="text-xs text-blue-300">å½“å‰æ±‡ç‡åŸºå‡†</div>
                <div class="font-mono text-sm" id="exchangeRateDisplay">Loading...</div>
            </div>
        </div>
    </header>

    <main class="max-w-4xl mx-auto px-4 py-8">
        
        <div class="card p-6 mb-8">
            <form id="queryForm" class="grid grid-cols-1 md:grid-cols-2 gap-6">
                <div>
                    <label class="label">ç›®çš„å›½ (Destination)</label>
                    <select id="countrySelect" class="select-input">
                        </select>
                </div>
                <div>
                    <label class="label">å•†å“ç±»å‹ (Category)</label>
                    <select id="categorySelect" class="select-input">
                        </select>
                </div>
            </form>
        </div>

        <div id="resultSection" class="grid grid-cols-1 md:grid-cols-2 gap-6 transition-opacity duration-300">
            
            <div class="card p-6 border-l-4 border-blue-500">
                <h3 class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-3">å…³ç¨èµ·å¾ç‚¹ (De Minimis)</h3>
                <div id="thresholdBody">
                    </div>
            </div>

            <div class="card p-6 border-l-4 border-green-500 bg-green-50">
                <h3 class="text-sm font-bold text-green-700 uppercase tracking-wider mb-3 flex items-center">
                    <svg class="w-4 h-4 mr-2" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 7h6m0 10v-3m-3 3h.01M9 17h.01M9 14h.01M12 14h.01M15 11h.01M12 11h.01M9 11h.01M7 21h10a2 2 0 002-2V5a2 2 0 00-2-2H7a2 2 0 00-2 2v14a2 2 0 002 2z"></path></svg>
                    è½åœ°æˆæœ¬æ¨¡æ‹Ÿ (Landed Cost)
                </h3>
                <div id="calculatorBody" class="text-sm">
                    </div>
            </div>

            <div class="card p-6 md:col-span-2">
                <h3 class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-4">ğŸš« è¿ç¦å“ & âš ï¸ åˆè§„è¦æ±‚</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <ul id="prohibitedList" class="list-disc list-inside space-y-2 text-red-600 text-sm font-medium">
                            </ul>
                    </div>
                    <div class="bg-slate-50 p-4 rounded-lg border border-slate-200">
                        <div id="complianceBody" class="text-sm text-slate-600 space-y-2">
                            </div>
                    </div>
                </div>
            </div>

            <div class="card p-6 md:col-span-2">
                <h3 class="text-sm font-bold text-slate-400 uppercase tracking-wider mb-4">ğŸšš ç‰©æµæ¸ é“ & COD ç­–ç•¥</h3>
                <div class="grid grid-cols-1 md:grid-cols-2 gap-8">
                    <div>
                        <div class="text-xs text-slate-500 mb-1">æ¨èç‰©æµæ¸ é“</div>
                        <div id="channelsBody" class="flex flex-wrap gap-2">
                            </div>
                    </div>
                    <div>
                        <div class="text-xs text-slate-500 mb-1">COD (è´§åˆ°ä»˜æ¬¾) é£é™©æç¤º</div>
                        <div id="codBody" class="text-sm text-slate-700 bg-yellow-50 p-3 rounded border border-yellow-200">
                            </div>
                    </div>
                </div>
            </div>

        </div>

        <footer class="mt-12 text-center text-slate-400 text-xs pb-8">
            <p>Â© <span id="year"></span> Global Logistics Internal Tool. Data for reference only.</p>
        </footer>
    </main>

    <script>
        /**
         * æ•°æ®åº“ä¸é€»è¾‘æ ¸å¿ƒ
         */
        const DB = {
            "Vietnam": {
                name: "Vietnam (è¶Šå—)",
                flag: "ğŸ‡»ğŸ‡³",
                currency: "VND",
                rate: 25450,
                customs: {
                    threshold: "0 VND (2025æ–°è§„)",
                    note: "âš ï¸ 2025å¹´2æœˆèµ·å–æ¶ˆå°é¢å…ç¨ï¼Œå…¨é¢å¾æ”¶è¿›å£ç¨å’ŒVATã€‚"
                },
                tax: { vat: 0.10, duty: 0.00, dutySpecial: 0.25 },
                compliance: {
                    req: "å‘ç¥¨é¡»å«å®Œæ•´CIFä»·æ ¼ï¼›åŒ–å¦†å“éœ€å¤‡æ¡ˆï¼›é€šä¿¡è®¾å¤‡éœ€MICè®¤è¯ã€‚",
                    risk: "ä¸­é«˜é£é™©"
                },
                cod: {
                    desc: "æ¶ˆè´¹è€…ä¹ æƒ¯å¼€ç®±éªŒè´§ï¼Œæ‹’æ”¶ç‡ 10-15%ã€‚å»ºè®®æä¾›â€œç­¾æ”¶å‰æŸ¥çœ‹å¤–è§‚â€æœåŠ¡ã€‚",
                    cycle: "T+3 (å‘¨ç»“)"
                },
                prohibited: ["Used Consumer Goods (äºŒæ‰‹è´§)", "Cultural Products (æ•æ„Ÿå†…å®¹)", "Firecrackers"],
                channels: ["Land Freight (ä¸­è¶Šé™†è¿)", "J&T Express", "VN Post"]
            },
            "Malaysia": {
                name: "Malaysia (é©¬æ¥è¥¿äºš)",
                flag: "ğŸ‡²ğŸ‡¾",
                currency: "MYR",
                rate: 4.45,
                customs: {
                    threshold: "500 MYR",
                    note: "âš ï¸ <500 MYR æ”¶10% LVGç¨ï¼›>500 MYR æ”¶å…³ç¨+SSTã€‚"
                },
                tax: { vat: 0.10, duty: 0.00, dutySpecial: 0.15 },
                compliance: {
                    req: "é¢å•éœ€æ ‡æ³¨ LVG Registration Numberï¼›ç”µå­äº§å“éœ€ SIRIM è®¤è¯ã€‚",
                    risk: "ä½é£é™©"
                },
                cod: {
                    desc: "ä¸œé©¬ (Sabah/Sarawak) æ—¶æ•ˆé•¿æ˜“æ‹’æ”¶ï¼›è¥¿é©¬ç”µå­é’±åŒ…æ™®åŠç‡é«˜ï¼ŒCOD æ¯”ä¾‹ä¸‹é™ã€‚",
                    cycle: "T+7"
                },
                prohibited: ["Religious Text on Fabric", "Indecent Printings", "Daggers"],
                channels: ["J&T Express", "Shopee Xpress", "GDEX"]
            },
            "Indonesia": {
                name: "Indonesia (å°å°¼)",
                flag: "ğŸ‡®ğŸ‡©",
                currency: "IDR",
                rate: 15850,
                customs: {
                    threshold: "3 USD (æä½)",
                    note: "âš ï¸ >3 USD å³æ”¶11% VATã€‚çººç»‡/ç®±åŒ…/é‹ç±»æœ‰ BMTP ä¿æŠ¤æ€§é«˜å…³ç¨ã€‚"
                },
                tax: { vat: 0.11, duty: 0.075, dutySpecial: 0.30 }, // 30% for textile safeguard estimate
                compliance: {
                    req: "å¿…å¤‡ NPWP (ç¨å·) æˆ– NIK (èº«ä»½è¯)ï¼›æ‰‹æœºéœ€æ³¨å†Œ IMEIï¼›åŒ–å¦†å“éœ€ BPOMã€‚",
                    risk: "æé«˜é£é™©"
                },
                cod: {
                    desc: "ç¾¤å²›åœ°å½¢è‡´æ´¾é€æ…¢ï¼Œä¹°å®¶æ˜“â€œé—å¿˜â€ã€‚å¿…é¡» WhatsApp ç¡®è®¤è®¢å•ã€‚",
                    cycle: "T+15"
                },
                prohibited: ["Used Clothing (ä¸¥ç¦)", "Batik Fabric", "Chinese Medicines"],
                channels: ["DDP Special Line (å¼ºçƒˆå»ºè®®)", "J&T Express", "SiCepat"]
            },
            "Saudi_Arabia": {
                name: "Saudi Arabia (æ²™ç‰¹)",
                flag: "ğŸ‡¸ğŸ‡¦",
                currency: "SAR",
                rate: 3.75,
                customs: {
                    threshold: "1000 SAR",
                    note: "âš ï¸ 15% VAT æ— å…å¾é¢ã€‚>1000 SAR åŠ æ”¶å…³ç¨ã€‚"
                },
                tax: { vat: 0.15, duty: 0.05, dutySpecial: 0.20 },
                compliance: {
                    req: "SABER è®¤è¯ (ç”µå­/ç©å…·)ï¼›Made in China å¿…é¡»ç‰©ç†åˆ»å°ã€‚",
                    risk: "é«˜é£é™©"
                },
                cod: {
                    desc: "å®¶åº­åœ°å€ä¸æ¸…ï¼Œå¥³æ€§æ”¶è´§ä¸ä¾¿ã€‚æå…¶ä¾èµ–ç”µè¯è”ç³»ã€‚å»ºè®®æ¥å…¥ WhatsAppã€‚",
                    cycle: "T+20"
                },
                prohibited: ["Alcohol & Pork", "Non-Islamic Religious Items", "Laser Pointers"],
                channels: ["Aramex", "SMSA", "iMile"]
            },
            "UAE": {
                name: "UAE (é˜¿è”é…‹)",
                flag: "ğŸ‡¦ğŸ‡ª",
                currency: "AED",
                rate: 3.67,
                customs: {
                    threshold: "300 AED",
                    note: "5% VAT æ™®éå¾æ”¶ã€‚é—¨æ§›ç›¸å¯¹è¾ƒé«˜ï¼Œç‰©æµè¾ƒæˆç†Ÿã€‚"
                },
                tax: { vat: 0.05, duty: 0.05, dutySpecial: 0.05 },
                compliance: {
                    req: "HS Code éœ€ç²¾ç¡®åˆ°8ä½ï¼›ç”µå­äº§å“éœ€ ESMA è®¤è¯ã€‚",
                    risk: "ä¸­é£é™©"
                },
                cod: {
                    desc: "å¤–ç±äººå£æµåŠ¨æ€§å¤§ï¼Œåœ°å€å˜æ›´é¢‘ç¹ã€‚å¦¥æŠ•ç‡ç›¸å¯¹è¾ƒé«˜ã€‚",
                    cycle: "T+7"
                },
                prohibited: ["Poppy Seeds (ä¸¥ç¦)", "Gambling Tools", "Boycotted Goods"],
                channels: ["iMile", "Aramex", "Emirates Post"]
            }
        };

        const CATEGORIES = [
            { id: "gen", name: "General Goods (æ™®è´§)" },
            { id: "tex", name: "Textile/Shoes/Bags (çººç»‡é‹åŒ…)" },
            { id: "ele", name: "Electronics (ç”µå­äº§å“)" },
            { id: "cos", name: "Cosmetics (åŒ–å¦†å“)" }
        ];

        // ç®€æ˜“çŠ¶æ€ç®¡ç†
        const state = {
            country: "Vietnam",
            category: "gen"
        };

        // DOM å…ƒç´ å¼•ç”¨
        const els = {
            countrySel: document.getElementById('countrySelect'),
            catSel: document.getElementById('categorySelect'),
            threshold: document.getElementById('thresholdBody'),
            calculator: document.getElementById('calculatorBody'),
            prohibited: document.getElementById('prohibitedList'),
            compliance: document.getElementById('complianceBody'),
            channels: document.getElementById('channelsBody'),
            cod: document.getElementById('codBody'),
            rateDisplay: document.getElementById('exchangeRateDisplay'),
            year: document.getElementById('year')
        };

        // åˆå§‹åŒ–
        function init() {
            els.year.textContent = new Date().getFullYear();
            
            // å¡«å……ä¸‹æ‹‰æ¡†
            els.countrySel.innerHTML = Object.keys(DB).map(k => `<option value="${k}">${DB[k].flag} ${DB[k].name}</option>`).join('');
            els.catSel.innerHTML = CATEGORIES.map(c => `<option value="${c.id}">${c.name}</option>`).join('');

            // ç»‘å®šäº‹ä»¶
            els.countrySel.addEventListener('change', (e) => { state.country = e.target.value; render(); });
            els.catSel.addEventListener('change', (e) => { state.category = e.target.value; render(); });

            // è¯»å– URL å‚æ•°
            const params = new URLSearchParams(location.search);
            if(params.get('country') && DB[params.get('country')]) {
                state.country = params.get('country');
                els.countrySel.value = state.country;
            }

            render();
        }

        // æ¸²æŸ“æ ¸å¿ƒé€»è¾‘
        function render() {
            const data = DB[state.country];
            const isSensitive = state.category === 'tex' || state.category === 'ele';
            
            // 1. æ›´æ–°é¡¶éƒ¨æ±‡ç‡æ˜¾ç¤º
            els.rateDisplay.textContent = `1 USD â‰ˆ ${data.rate} ${data.currency}`;

            // 2. å…³ç¨é—¨æ§›
            els.threshold.innerHTML = `
                <div class="text-2xl font-bold text-slate-800">${data.customs.threshold}</div>
                <div class="text-sm text-slate-500 mt-2">${data.customs.note}</div>
            `;

            // 3. æˆæœ¬æ¨¡æ‹Ÿè®¡ç®—å™¨
            const sampleUSD = 100; // æ¨¡æ‹Ÿ 100 ç¾å…ƒè´§å€¼
            let dutyRate = data.tax.duty;
            let tip = "æ™®è´§ç¨ç‡ä¼°ç®—";
            
            // ç‰¹æ®Šç¨ç‡é€»è¾‘
            if (state.country === 'Indonesia' && state.category === 'tex') {
                dutyRate = data.tax.dutySpecial;
                tip = "âš ï¸ è§¦å‘BMTPä¿æŠ¤æ€§é«˜å…³ç¨";
            } else if (state.category === 'gen') {
                 // é©¬æ¥è¥¿äºš LVG é€»è¾‘æ¨¡æ‹Ÿ
                 if (state.country === 'Malaysia' && (sampleUSD * data.rate < 500)) {
                     dutyRate = 0;
                     tip = "ä½ä»·å€¼å•†å“(LVG)å…å…³ç¨ï¼Œä»…æ”¶é”€å”®ç¨";
                 }
            }

            const estDuty = sampleUSD * dutyRate;
            const estVat = (sampleUSD + estDuty) * data.tax.vat;
            const totalTax = estDuty + estVat;

            els.calculator.innerHTML = `
                <div class="flex justify-between items-center mb-2 pb-2 border-b border-green-200">
                    <span>è´§å€¼åŸºå‡†:</span>
                    <span class="font-mono font-bold">$${sampleUSD}</span>
                </div>
                <div class="flex justify-between items-center text-slate-600 mb-1">
                    <span>é¢„ä¼°å…³ç¨ (${(dutyRate*100).toFixed(1)}%):</span>
                    <span>$${estDuty.toFixed(2)}</span>
                </div>
                <div class="flex justify-between items-center text-slate-600 mb-2">
                    <span>é¢„ä¼°å¢å€¼ç¨ (${(data.tax.vat*100).toFixed(0)}%):</span>
                    <span>$${estVat.toFixed(2)}</span>
                </div>
                <div class="flex justify-between items-center pt-2 border-t border-green-200 text-green-800 font-bold">
                    <span>æ€»ç¨è´¹æˆæœ¬:</span>
                    <span>$${totalTax.toFixed(2)}</span>
                </div>
                <div class="text-xs text-green-600 mt-2 text-right">${tip}</div>
            `;

            // 4. è¿ç¦å“
            let prohibitedItems = [...data.prohibited];
            if (state.category === 'ele' && state.country === 'Saudi_Arabia') prohibitedItems.unshift("âš ï¸ Non-SABER Electronics");
            els.prohibited.innerHTML = prohibitedItems.map(i => `<li>${i}</li>`).join('');

            // 5. åˆè§„è¦æ±‚
            els.compliance.innerHTML = `
                <div class="font-bold text-slate-700 mb-1">åˆè§„æ–‡ä»¶ï¼š</div>
                <p class="mb-2">${data.compliance.req}</p>
                <div class="inline-block px-2 py-1 rounded bg-slate-200 text-xs font-bold text-slate-600">åˆè§„éš¾åº¦ï¼š${data.compliance.risk}</div>
            `;

            // 6. æ¸ é“
            els.channels.innerHTML = data.channels.map(c => 
                `<span class="bg-white border border-blue-200 text-blue-700 px-3 py-1 rounded-full text-xs font-medium shadow-sm">${c}</span>`
            ).join('');

            // 7. COD
            els.cod.innerHTML = `
                <div class="mb-1 font-bold">å›æ¬¾å‘¨æœŸ: ${data.cod.cycle}</div>
                <div>${data.cod.desc}</div>
            `;
            
            // URL åŒæ­¥
            const newUrl = `${location.pathname}?country=${state.country}`;
            history.replaceState(null, '', newUrl);
        }

        // å¯åŠ¨
        init();

    </script>
</body>
</html>
